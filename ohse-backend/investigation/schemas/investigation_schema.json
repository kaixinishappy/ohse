{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Investigation Forms",
  "type": "object",
  "properties": {
    "investigation_team_details": {
      "type": "object",
      "required": [
        "team_members",
        "other_people",
        "investigation_start_date",
        "investigation_end_date"
      ],
      "properties": {
        "team_members": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": [ "name", "is_leader"],
            "properties": {
              "name": { "type": "string", "minLength": 1 },
              "is_leader": { "type": "boolean" }
            }
          }
        },
        "other_people": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": { "type": "string", "minLength": 1 }
            }
          }
        },
        "investigation_start_date": {
          "type": "string",
          "format": "date",
          "minLength": 1
        },
        "investigation_end_date": {
          "type": "string",
          "format": "date",
          "minLength": 1
        }
      }
    },
    "events": {
      "type": "object",
      "required": ["before_incident", "during_incident", "after_incident"],
      "properties": {
        "before_incident": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["time", "date", "description"],
            "properties": {
              "time": { "type": "string", "format": "time", "minLength": 1 },
              "date": { "type": "string", "format": "date", "minLength": 1 },
              "description": { "type": "string", "minLength": 1 }
            }
          }
        },
        "during_incident": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["time", "date", "description"],
            "properties": {
              "time": { "type": "string", "format": "time", "minLength": 1 },
              "date": { "type": "string", "format": "date", "minLength": 1 },
              "description": { "type": "string", "minLength": 1 }
            }
          }
        },
        "after_incident": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["time", "date", "description"],
            "properties": {
              "time": { "type": "string", "format": "time", "minLength": 1 },
              "date": { "type": "string", "format": "date", "minLength": 1 },
              "description": { "type": "string", "minLength": 1 }
            }
          }
        }
      }
    },
    "investigation_details": {
      "type": "object",
      "required": ["cause_of_injury", "incident_contributing_factors"],
      "properties": {
        "cause_of_injury": { "type": "string", "minLength": 1 },
        "incident_contributing_factors": {
          "type": "object",
          "required": [
            "environment_fac",
            "human_fac",
            "work_fac",
            "material_fac",
            "parts",
            "other"
          ],
          "properties": {
            "environment_fac": { "type": "string", "minLength": 1 },
            "human_fac": { "type": "string", "minLength": 1 },
            "work_fac": { "type": "string", "minLength": 1 },
            "material_fac": { "type": "string", "minLength": 1 },
            "parts": { "type": "string", "minLength": 1 },
            "other": { "type": "string", "minLength": 1 }
          }
        }
      }
    },
    "corrective_preventive_action": {
      "type": "object",
      "required": ["action"],
      "properties": {
        "action": {
          "type": "object",
          "required": [
            "recommendation",
            "responsible_person",
            "due_date",
            "completion_date"
          ],
          "properties": {
            "recommendation": { "type": "string", "minLength": 1 },
            "responsible_person": { "type": "string", "minLength": 1 },
            "due_date": { "type": "string", "format": "date", "minLength": 1 },
            "completion_date": { "type": "string", "format": "date","minLength": 1 }
          }
        }
      }
    },
    "submitter_information": {
      "type": "object",
      "required": [
            "name_of_submitter",
            "designation",
            "date"
          ],
      "properties": {
        "name_of_submitter": { "type": "string", "minLength": 1 },
        "designation": { "type": "string", "minLength": 1 },
        "date": { "type": "string", "format": "date", "minLength": 1 }
      }
    }
  },
  "required": [
    "investigation_team_details",
    "events",
    "investigation_details",
    "corrective_preventive_action",
    "submitter_information"
  ]
}
